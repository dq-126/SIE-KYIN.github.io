---
title: 앱 데이터 송신 패턴
categories:
  - iOS
excerpt: "앱의 runLoop와 델리겟, 알림 리스폰더등의 패턴을 알아보자:)"
date: 2023-11-27
tags:
- iOS-PRO
---

# 개요

앱을 실행하면 어떤 동작을 하는 지와 데이터를 어떻게 

<br />
<br />

---

# Application RunLoop

---

GUI를 사용하는 iOS는 사용자와 상호작용하며 동작한다. 사용자나 내부적인 이벤트등을 iOS는 감지하고 그에 따른 처리를 하는 동작을 반복한다. 이것을 run loop라고 부른다.


<br />

<figure>
	<a href="https://github.com/dq-QQQ/dq-QQQ.github.io/assets/79088896/bf0dc181-76fe-44cc-a2b9-49d2be65fb59">
		<img src="https://github.com/dq-QQQ/dq-QQQ.github.io/assets/79088896/bf0dc181-76fe-44cc-a2b9-49d2be65fb59" class="w8" />
	</a>
</figure>

<br />

런루프는 OS에서 넘어온 이벤트의 종류와 상태에 따른 처리를 한다.

이벤트들은 이벤트 큐에 저장되며 순차적으로 처리된다. 이벤트 큐가 비어있다면 앱도 쉬는 상태가 된다.

이벤트들은 특정 객체에 메시지를 전달될 것이다. 이 작업을 런루프가 해주며 개발자는 어떤 동작을 하는 지만 잘 짜면된다.

앱이 실행되면 한 개의 런루프는 무조건 생성되고 앱의 생명주기와 리소스 관리를 하는 객체인 UIApplication이라는 클래스 인스턴스가 실행된다.

이 인스턴스는 OS에서 전달된 이벤트에 대응하는 객체를 선택하고 적절한 메시지를 전송한다.

인스턴스에 접근하기 위해서는 sharedApplication이라는 클래스 메서드를 사용하는데 이 메서드는 싱글톤 패턴으로 되어있다.

UIApplication()은 UIKit 프레임워크에서 제공하는 함수로 앱의 초기설정은 main함수에서 하는 것이 아닌 UIApplication 델리게이트 객체 안에 작성해야한다.

런루프가 있으면 어떤 이벤트가 발생했을 때 이벤트 큐에 대기시키고 나중에 순서대로 실행할 수 있다.

이러한 특징은 멀티스레딩에서 비동기적인 동작에 활용되는데 앱이 멀티스레드로 동작할 때는 앱의 메인 런루프 이외에

각 스레드마다 런루프를 실행해서 스레드간의 통신을 구현할 때 사용하는 개념이다.

일정 시간 후 또는 일정 시간 간격으로 메시지 송신을하려면 병렬 처리에 대한 개념을 알아야한다.

Foundation에는 지정한 메시지를 일정 시간 후에 실행시키기 위한 NSTimer클래스가 있다. 이를 타이머라고 부른다.

이 타이머를 이용할 수도 있고 performSelector를 이용할 수도 있다.

<br />
<br />

---

# delegate

---

객체가 용도에 따라 기본 동작을 변경하거나 추가 작업을 수행하기 위해 참조하는 객체를 델리게이트라고 부른다.

델리게이트는 실행 중에 동적으로 할당할 수 있는데 객체가 서로 기능을 분담하고 연계하며 작동하도록 하는 디자인 패턴이다.

객체지향에서는 어떤 객체가 처리할 수 없는 메시지를 받았을 때 다른 객체에 처리를 대신하게 하는 구조라고 정의한다.

