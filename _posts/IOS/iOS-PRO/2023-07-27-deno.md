---
title: Delegate vs Notification
categories:
  - iOS
excerpt: "객체들의 소통에 대해 알아보자:)"
date: 2023-07-27
tags:
- iOS-PRO
---



<br />
<br />

---

# Delegate


## 역할

객체간 1대1 통신을 구현하는 패턴으로 객체 A가 객체 B에게 특정 이벤트 발생 시 자신의 동작을 객체 B에게 위임한다.

프로토콜을 이용하여 다른 객체와 소통하고 작업을 대신 수행하는 방식이다. 프로토콜을 구현하는 객체가 델리게이트 역할을 수행한다.

## 동작 방식

* 객체 A는 어떤 이벤트가 발생했을 때 델리게이트에게 알린다.
* 객체 B는 델리게이트 메서드를 구현하여 해당 이벤트가 발생했을 때 적절한 동작을 수행한다.

## 예시

UITableViewDelegat와 UITableViewDataSource는 UITableView의 델리게이트와 데이터 소스를 위한 프로토콜이다.

셀 선택이나 스크롤같은 UITableView에서 발생하는 이벤트를 처리하기 위해 델리게이트 메서드를 구현할 수 있다.


## 장단점

이 패턴의 장점은 로직의 흐름을 파악하기 쉬우며 소통 과정을 모니터링하는 외부객체가 필요없다.

그러나 많은 줄의 코드가 필요하며 많은 객체들에게 이벤트를 알려주는 것이 어렵다.

따라서 이벤트를 1대1로 전달할 때 사용하며 프로토콜을 정의하여 이벤트를 대신 처리할 객체를 만들어서 사용한다.



<br />
<br />

---

# Notification


## 역할

NotificationCenter라는 메모리 점유와 데이터 공유에 특화된 싱글톤 객체를 통해서 이벤트 발생 여부를 옵저버에 저장된 객체들에게 알림을 post한다.

싱글톤 패턴이란 생성자가 여러번 호출되어도 실제 객체는 하나이고 최초 생성 이후 호출된 생성자는 최초의 생성자가 생성한 객체를 리턴하는 것을 의미한다.

## 동작방식

* 객체 A는 NotificationCenter를 이용하여 특정 이벤트를 등록한다.
* 외부객체에 등록된 객체들은 해당 이벤트에 관심이 있으면 NotificationCenter를 통해 등록하고 이벤트 발생시 등록된 객체들에게 알림이 간다.
* 해당 알림에 상응하는 작업을 수행한다.

# 장단점

짧은 코드로 구현이 가능하며 다수의 객체들에게 동시에 이벤트를 알려줄 수 있다.

앱 내에서 공식적으로 연결될 수 없는 컴포넌트 간 상호작용이 필요한 경우에 활용되는데 키보드를 띄울 때 이용한다.

그러나 소통과정을 모니터링하는 외부객체가 필요하며 key값으로 소통하는 방식이므로 데이터의 추적이 어렵다.

<br />
<br />

---

# 공통점

앱에서 발생한 이벤트가 현재 화면이 아닌 다른화면까지 영향을 줄 때 사용한다. 그러기에 결과는 같다.

모두 앱 내부에서 이벤트를 처리하거나 데이터를 전달하는 데 사용되는 패턴이다.

두 방식 모두 값의 변화를 포착하여 이벤트를 발생시킨다.

<br />
<br />

---

# 차이점

1대1, 1대다의 객체간 관계가 있다.따라서 Delegate은 객체간 상호작용이 필요한 경우, Notification은 한 이벤트에 여러개의 객체가 반응할 때 사용한다.

Delegate은 프로토콜을 사용하여 델리게이트 객체가 해당 프로토콜을 구현하는 방식으로 등록하지만 Notification은 NotificationCenter라는 외부객체를 이용한다.

Notification 방식은 수신자가 발신자의 정보를 모르지만 Delegate은 알고있다.

Notification은 어떤 값의 변화를 포착하여 상응하는 이벤트를 발생하기만 하면 된다.

Delegate은 객체의 틀을 프로토콜로 잡고 값의 변화를 저장한 변수를 추적하며 이벤트처리 메서드를 요구한다.

# 개념은 알겠지만 실제 코드 짤 때 사용하면서 이해해봐야겠다.
